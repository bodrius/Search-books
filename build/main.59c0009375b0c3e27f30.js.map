{"version":3,"sources":["webpack:///./template/books-list.hbs","webpack:///./api.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","escapeExpression","lambda","fetchBooks","searchQuery","callback","storage","STORAGE","localStorage","getItem","JSON","parse","setItem","stringify","fetch","then","response","json","catch","error","console","log","debounce","require","choiseInput","document","querySelector","choiseUlList","getElementById","buildResult","array","markUpList","items","map","name","booksBuildList","volumeInfo","title","join","insertAdjacentHTML","addEventListener","event","innerHTML","target","value","length"],"mappings":"gFAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,MAAO,yBACLJ,EAAUK,iBAAiBL,EAAUM,OAAOL,EAAQA,IACpD,aACJ,SAAU,K,kHC4BGM,MAlCf,SAAoBC,EAAaC,GAK/B,IAAIC,EAAU,GACRC,EAAU,eACZC,aAAaC,QAAQF,GACvBD,EAAUI,KAAKC,MAAMH,aAAaC,QAAQF,IAE1CC,aAAaI,QAAQL,EAASG,KAAKG,UAAUP,IAG3CA,EAAQF,GACVC,EAASC,EAAQF,IAMnBU,MAFiB,iDAAiDV,GAG/DW,MAAK,SAAAC,GACJ,OAAOA,EAASC,UAEjBF,MAAK,SAAAf,GACJM,EAAQF,GAAeJ,EACvBQ,aAAaI,QAAQL,EAASG,KAAKG,UAAUP,IAC7CD,EAASL,MAEVkB,OAAM,SAAAC,GACLC,QAAQC,IAAIF,O,qBC9BZG,EAAWC,EAAQ,QAOnBC,EAAcC,SAASC,cAAc,SACrCC,EAAeF,SAASG,eAAe,cAU7C,SAASC,EAAYC,GACnB,IAAMC,EAAaD,EAAME,MACtBC,KAAI,SAAAC,GAAI,OAAIC,IAAeD,EAAKE,WAAWC,UAC3CC,KAAK,IACRX,EAAaY,mBAAmB,YAAaR,GAb/CP,EAAYgB,iBAAiB,QAASlB,GAEtC,SAAsBmB,QAepBd,EAAae,UAAY,IAbrBD,EAAME,OAAOC,MAAMC,OAAS,GAC9B1C,EAAWsC,EAAME,OAAOC,MAAOf,KAL0B,Q","file":"main.59c0009375b0c3e27f30.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<li class=\\\"book-item\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\n\\n\";\n},\"useData\":true});","function fetchBooks(searchQuery, callback) {\n  // added hashing, if there was already a request for a search query,\n  //  then a server request does not occur, which increases the response speed\n  //  and does not pull traffic from the client\n\n  let storage = {};\n  const STORAGE = 'SEARCH QUERY';\n  if (localStorage.getItem(STORAGE)) {\n    storage = JSON.parse(localStorage.getItem(STORAGE));\n  } else {\n    localStorage.setItem(STORAGE, JSON.stringify(storage));\n  }\n\n  if (storage[searchQuery]) {\n    callback(storage[searchQuery]);\n    return;\n  }\n\n  const BASE_URL = `https://www.googleapis.com/books/v1/volumes?q=${searchQuery}`;\n\n  fetch(BASE_URL)\n    .then(response => {\n      return response.json();\n    })\n    .then(data => {\n      storage[searchQuery] = data;\n      localStorage.setItem(STORAGE, JSON.stringify(storage));\n      callback(data);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nexport default fetchBooks;\n","const debounce = require('lodash.debounce');\nimport './styles.css';\nimport fetchBooks from './api';\nimport booksBuildList from './template/books-list.hbs';\n\n\n\nconst choiseInput = document.querySelector('input');\nconst choiseUlList = document.getElementById('books-list');\nchoiseInput.addEventListener('input', debounce(getBooksList, 3000));\n\nfunction getBooksList(event) {\n  clearList();\n  if (event.target.value.length > 3) {\n    fetchBooks(event.target.value, buildResult);\n  }\n}\n\nfunction buildResult(array) {\n  const markUpList = array.items\n    .map(name => booksBuildList(name.volumeInfo.title))\n    .join('');\n  choiseUlList.insertAdjacentHTML('beforeend', markUpList);\n}\n\nfunction clearList() {\n  choiseUlList.innerHTML = '';\n}\n"],"sourceRoot":""}